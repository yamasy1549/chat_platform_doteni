{% extends "layout.html" %}

{% block body %}
  <ol class="rooms">
  {% for room in rooms %}
    <li class="card">
      {% if g.user.is_admin() %}
        <a href={{ url_for('rooms.show', hash_id=room.hash_id) }}>
      {% else %}
        <a href={{ url_for('rooms.show', hash_id=room.hash_id) }} onclick="return confirm('このルームに入室しますか？')">
      {% endif %}

        <header class="header">
          <h2 class="title">{{ room.name }}</h2>
          <div class="flex_spacebetween">
            <small>定員 {{ room.users|length }}/{{ room.capacity() }}人</small>
            <small>{{ room.status.to_text() }}</small>
          </div>
        </header>
        <div class="body">
          <ul>
            {% for user in room.users %}
            <li>{{ user.name }}</li>
            {% endfor %}
          </ul>
        </div>
        {% if g.user.is_admin() %}
          <form action="{{ url_for('rooms.edit', hash_id=room.hash_id) }}">
            <input type="submit" value="編集" class="button">
          </form>
        {% endif %}
      </a>
    </li>
  {% else %}
    <li>ルームがありません。</li>
  {% endfor %}
  </ol>

  {% if g.user.is_admin() %}
    <a class="button" href="{{ url_for('rooms.create') }}">ルーム新規登録</a>
  {% endif %}
{% endblock %}
